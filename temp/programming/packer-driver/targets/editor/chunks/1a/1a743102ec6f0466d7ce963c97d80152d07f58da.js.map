{"version":3,"sources":["file:///Users/zzx/Desktop/mygame/assets/scripts/gameStart.ts"],"names":["_decorator","Component","instantiate","Label","Node","resMgr","tools","SOUND","ccclass","property","gameStart","gamePrefab","gameNode","openRankNode","onLoad","Instance","console","log","destroy","start","playSound","back_sound","getAsset","level","getLevel","setLevelLabel","rankLabel","string","btnLabel","saveLevel","onBtnClick","event","data","parent","node","active","hide","click_sound","main_node","rule_node","getChildByName","getComponent","show"],"mappings":"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","sourcesContent":["import { _decorator, Button, Component, instantiate, Label, Node, Prefab } from 'cc';\nimport resMgr from './resMgr';\nimport tools, { SOUND } from './tools';\nconst { ccclass, property } = _decorator;\n\n@ccclass('gameStart')\nexport class gameStart extends Component {\n    static Instance: gameStart = null;\n\n    @property(Label)\n    rankLabel: Label = null;\n\n    @property(Label)\n    btnLabel: Label = null;\n\n    //游戏Node\n    gamePrefab: Prefab;\n    gameNode: Node = null;\n\n    //开始界面\n    @property(Node)\n    main_node: Node = null;\n\n    //排行榜界面\n    @property(Node)\n    rule_node: Node = null;\n    openRankNode = false;\n\n    onLoad() {\n        if (gameStart.Instance === null) {\n            gameStart.Instance = this;\n            console.log('初始化gameStart单列!');\n        }\n        else {\n            this.destroy();\n            return;\n        }\n    }\n\n    start(): void {\n        tools.playSound(SOUND.back_sound);\n        this.gamePrefab = resMgr.Instance.getAsset('prefabs', 'gameNode') as Prefab;\n        let level = tools.getLevel();\n        this.setLevelLabel(level);\n    }\n\n    setLevelLabel(level) {\n        this.rankLabel.string = '最高纪录:' + level;\n        this.btnLabel.string = '第' + level + '关';\n        tools.saveLevel();\n    }\n\n    //开始按钮\n    onBtnClick(event, data) {\n        if (data == 'restGame') {\n            tools.level = 1;\n            tools.saveLevel();\n        }\n\n        if (data == \"startGame\") {\n            this.gameNode = instantiate(this.gamePrefab);\n            this.gameNode.parent = this.node.parent;\n            this.gameNode.active = true;\n            this.hide();\n        }\n        else if (data == \"rankBtn\") {\n            //显示排行榜\n            if (this.openRankNode == false) {\n                tools.playSound(SOUND.click_sound);\n                this.openRankNode = true;\n                this.main_node.active = false;\n                this.rule_node.active = true;\n                this.node.getChildByName('rankBtn').getChildByName('Label').getComponent(Label).string = '关闭排行榜';\n            }\n            else //关闭排行榜\n            {\n                tools.playSound(SOUND.click_sound);\n                this.openRankNode = false;\n                this.main_node.active = true;\n                this.rule_node.active = false;\n                this.node.getChildByName('rankBtn').getChildByName('Label').getComponent(Label).string = '显示排行榜';\n            }\n        }\n\n    }\n\n    hide() {\n        this.node.active = false;\n    }\n\n    show() {\n        this.node.active = true;\n        this.openRankNode = false;\n        this.main_node.active = true;\n        this.rule_node.active = false;\n        this.node.getChildByName('rankBtn').getChildByName('Label').getComponent(Label).string = '显示排行榜';\n    }\n\n}\n\n"]}