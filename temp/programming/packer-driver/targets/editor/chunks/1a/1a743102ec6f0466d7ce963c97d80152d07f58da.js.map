{"version":3,"sources":["file:///Users/zzx/Desktop/mygame/assets/scripts/gameStart.ts"],"names":["_decorator","Component","instantiate","Label","resMgr","tools","SOUND","ccclass","property","gameStart","gamePrefab","gameNode","onLoad","Instance","console","log","getAsset","level","getLevel","setLevel","playSound","back_sound","destroy","rankLabel","string","btnLabel","saveLevel","onBtnClick","event","data","parent","node","active","getPosition","hide","show"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;;AACpCC,MAAAA,M,iBAAAA,M;;AACFC,MAAAA,K;AAASC,MAAAA,K,iBAAAA,K;;;;;;;;;OACV;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;2BAGjBS,S,WADZF,OAAO,CAAC,WAAD,C,UAEHC,QAAQ,CAACL,KAAD,C,UAGRK,QAAQ,CAACL,KAAD,C,sCALb,MACaM,SADb,SAC+BR,SAD/B,CACyC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAOrCS,UAPqC;AAAA,eAQrCC,QARqC;AAAA;;AAYrCC,QAAAA,MAAM,GAAG;AACL,cAAIH,SAAS,CAACI,QAAV,KAAuB,IAA3B,EAAiC;AAC7BC,YAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,iBAAKL,UAAL,GAAkB;AAAA;AAAA,kCAAOG,QAAP,CAAgBG,QAAhB,CAAyB,SAAzB,EAAoC,UAApC,CAAlB;AACAP,YAAAA,SAAS,CAACI,QAAV,GAAqB,IAArB;AACA,gBAAII,KAAK,GAAG;AAAA;AAAA,gCAAMC,QAAN,EAAZ;AACA,iBAAKC,QAAL,CAAcF,KAAd;AACA;AAAA;AAAA,gCAAMG,SAAN,CAAgB;AAAA;AAAA,gCAAMC,UAAtB;AACH,WAPD,MAQK;AACD,iBAAKC,OAAL;AACA;AACH;AACJ;;AAEDH,QAAAA,QAAQ,CAACF,KAAD,EAAQ;AACZ,eAAKM,SAAL,CAAeC,MAAf,GAAwB,UAAUP,KAAlC;AACA,eAAKQ,QAAL,CAAcD,MAAd,GAAuB,MAAMP,KAAN,GAAc,GAArC;AACA;AAAA;AAAA,8BAAMS,SAAN;AACH,SA/BoC,CAiCrC;;;AACAC,QAAAA,UAAU,CAACC,KAAD,EAAQC,IAAR,EAAc;AACpB,cAAIA,IAAI,IAAI,UAAZ,EAAwB;AACpB;AAAA;AAAA,gCAAMZ,KAAN,GAAc,CAAd;AACA;AAAA;AAAA,gCAAMS,SAAN;AACH;;AACD,eAAKf,QAAL,GAAgBT,WAAW,CAAC,KAAKQ,UAAN,CAA3B;AACA,eAAKC,QAAL,CAAcmB,MAAd,GAAuB,KAAKC,IAAL,CAAUD,MAAjC;AACA,eAAKnB,QAAL,CAAcqB,MAAd,GAAuB,IAAvB;AAEAlB,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgC,KAAKJ,QAAL,CAAcsB,WAAd,EAAhC;AACA,eAAKC,IAAL;AACH;;AAEDA,QAAAA,IAAI,GAAG;AACH,eAAKH,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;;AAEDG,QAAAA,IAAI,GAAG;AACH,eAAKJ,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH;;AArDoC,O,UAU9BnB,Q,GAAsB,I","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab } from 'cc';\nimport { resMgr } from './resMgr';\nimport tools, { SOUND } from './tools';\nconst { ccclass, property } = _decorator;\n\n@ccclass('gameStart')\nexport class gameStart extends Component {\n    @property(Label)\n    rankLabel: Label;\n\n    @property(Label)\n    btnLabel: Label;\n\n    gamePrefab: Prefab;\n    gameNode: Node;\n\n    static Instance: gameStart = null;\n\n    onLoad() {\n        if (gameStart.Instance === null) {\n            console.log('初始化gameStart单列!')\n            this.gamePrefab = resMgr.Instance.getAsset('prefabs', 'gameNode') as Prefab;\n            gameStart.Instance = this;\n            let level = tools.getLevel();\n            this.setLevel(level);\n            tools.playSound(SOUND.back_sound);\n        }\n        else {\n            this.destroy();\n            return;\n        }\n    }\n\n    setLevel(level) {\n        this.rankLabel.string = '最高纪录:' + level;\n        this.btnLabel.string = '第' + level + '关';\n        tools.saveLevel();\n    }\n\n    //开始按钮\n    onBtnClick(event, data) {\n        if (data == 'restGame') {\n            tools.level = 1;\n            tools.saveLevel();\n        }\n        this.gameNode = instantiate(this.gamePrefab);\n        this.gameNode.parent = this.node.parent;\n        this.gameNode.active = true;\n        \n        console.log('this.gameNode = ', this.gameNode.getPosition())\n        this.hide();\n    }\n\n    hide() {\n        this.node.active = false;\n    }\n\n    show() {\n        this.node.active = true;\n    }\n\n}\n\n"]}