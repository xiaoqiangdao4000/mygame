{"version":3,"sources":["file:///C:/Users/zzx/Desktop/mygame/assets/scripts/gameStart.ts"],"names":["_decorator","Component","instantiate","Label","resMgr","tools","SOUND","ccclass","property","gameStart","gamePrefab","gameNode","openContextNode","onLoad","Instance","console","log","destroy","start","playSound","back_sound","node","getChildByName","active","getAsset","level","getLevel","setLevelLabel","rankLabel","string","btnLabel","saveLevel","onBtnClick","event","data","parent","hide","show"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,K,OAAAA,K;;AACtCC,MAAAA,M;;AACAC,MAAAA,K;AAASC,MAAAA,K,iBAAAA,K;;;;;;;;;OACV;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;2BAGjBS,S,WADZF,OAAO,CAAC,WAAD,C,UAIHC,QAAQ,CAACL,KAAD,C,UAGRK,QAAQ,CAACL,KAAD,C,sCAPb,MACaM,SADb,SAC+BR,SAD/B,CACyC;AAAA;AAAA;;AAAA;;AAAA;;AASrC;AATqC,eAUrCS,UAVqC;AAAA,eAWrCC,QAXqC,GAWpB,IAXoB;AAarC;AAbqC,eAcrCC,eAdqC,GAcb,IAda;AAAA;;AAgBrCC,QAAAA,MAAM,GAAG;AACL,cAAIJ,SAAS,CAACK,QAAV,KAAuB,IAA3B,EAAiC;AAC7BL,YAAAA,SAAS,CAACK,QAAV,GAAqB,IAArB;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH,WAHD,MAIK;AACD,iBAAKC,OAAL;AACA;AACH;AACJ;;AAEDC,QAAAA,KAAK,GAAS;AACV;AAAA;AAAA,8BAAMC,SAAN,CAAgB;AAAA;AAAA,8BAAMC,UAAtB;AACA,eAAKR,eAAL,GAAuB,KAAKS,IAAL,CAAUC,cAAV,CAAyB,aAAzB,CAAvB;AACA,eAAKV,eAAL,CAAqBW,MAArB,GAA8B,KAA9B;AACA,eAAKb,UAAL,GAAkB;AAAA;AAAA,gCAAOI,QAAP,CAAgBU,QAAhB,CAAyB,SAAzB,EAAoC,UAApC,CAAlB;AACA,cAAIC,KAAK,GAAG;AAAA;AAAA,8BAAMC,QAAN,EAAZ;AACA,eAAKC,aAAL,CAAmBF,KAAnB;AACH;;AAEDE,QAAAA,aAAa,CAACF,KAAD,EAAQ;AACjB,eAAKG,SAAL,CAAeC,MAAf,GAAwB,UAAUJ,KAAlC;AACA,eAAKK,QAAL,CAAcD,MAAd,GAAuB,MAAMJ,KAAN,GAAc,GAArC;AACA;AAAA;AAAA,8BAAMM,SAAN;AACH,SAxCoC,CA0CrC;;;AACAC,QAAAA,UAAU,CAACC,KAAD,EAAQC,IAAR,EAAc;AACpB,cAAIA,IAAI,IAAI,UAAZ,EAAwB;AACpB;AAAA;AAAA,gCAAMT,KAAN,GAAc,CAAd;AACA;AAAA;AAAA,gCAAMM,SAAN;AACH;;AAED,cAAIG,IAAI,IAAI,WAAZ,EAAyB;AACrB,iBAAKvB,QAAL,GAAgBT,WAAW,CAAC,KAAKQ,UAAN,CAA3B;AACA,iBAAKC,QAAL,CAAcwB,MAAd,GAAuB,KAAKd,IAAL,CAAUc,MAAjC;AACA,iBAAKxB,QAAL,CAAcY,MAAd,GAAuB,IAAvB;AACA,iBAAKa,IAAL;AACH,WALD,MAMK,IAAIF,IAAI,IAAI,SAAZ,EAAuB;AACxB,iBAAKtB,eAAL,CAAqBW,MAArB,GAA8B,IAA9B;AACH;AAEJ;;AAEDa,QAAAA,IAAI,GAAG;AACH,eAAKf,IAAL,CAAUE,MAAV,GAAmB,KAAnB;AACH;;AAEDc,QAAAA,IAAI,GAAG;AACH,eAAKhB,IAAL,CAAUE,MAAV,GAAmB,IAAnB;AACH;;AAnEoC,O,UAC9BT,Q,GAAsB,I;;;;;iBAGV,I;;;;;;;iBAGD,I","sourcesContent":["import { _decorator, Component, instantiate, Label, Node, Prefab } from 'cc';\r\nimport resMgr from './resMgr';\r\nimport tools, { SOUND } from './tools';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('gameStart')\r\nexport class gameStart extends Component {\r\n    static Instance: gameStart = null;\r\n\r\n    @property(Label)\r\n    rankLabel: Label = null;\r\n\r\n    @property(Label)\r\n    btnLabel: Label = null;\r\n\r\n    //游戏Node\r\n    gamePrefab: Prefab;\r\n    gameNode: Node = null;\r\n\r\n    //openContextNode\r\n    openContextNode: Node = null;\r\n\r\n    onLoad() {\r\n        if (gameStart.Instance === null) {\r\n            gameStart.Instance = this;\r\n            console.log('初始化gameStart单列!');\r\n        }\r\n        else {\r\n            this.destroy();\r\n            return;\r\n        }\r\n    }\r\n\r\n    start(): void {\r\n        tools.playSound(SOUND.back_sound);\r\n        this.openContextNode = this.node.getChildByName('openContext');\r\n        this.openContextNode.active = false;\r\n        this.gamePrefab = resMgr.Instance.getAsset('prefabs', 'gameNode') as Prefab;\r\n        let level = tools.getLevel();\r\n        this.setLevelLabel(level);\r\n    }\r\n\r\n    setLevelLabel(level) {\r\n        this.rankLabel.string = '最高纪录:' + level;\r\n        this.btnLabel.string = '第' + level + '关';\r\n        tools.saveLevel();\r\n    }\r\n\r\n    //开始按钮\r\n    onBtnClick(event, data) {\r\n        if (data == 'restGame') {\r\n            tools.level = 1;\r\n            tools.saveLevel();\r\n        }\r\n\r\n        if (data == \"startGame\") {\r\n            this.gameNode = instantiate(this.gamePrefab);\r\n            this.gameNode.parent = this.node.parent;\r\n            this.gameNode.active = true;\r\n            this.hide();\r\n        }\r\n        else if (data == \"rankBtn\") {\r\n            this.openContextNode.active = true;\r\n        }\r\n\r\n    }\r\n\r\n    hide() {\r\n        this.node.active = false;\r\n    }\r\n\r\n    show() {\r\n        this.node.active = true;\r\n    }\r\n\r\n}\r\n\r\n"]}