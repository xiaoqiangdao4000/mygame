{"version":3,"sources":["file:///Users/zzx/Desktop/mygame/assets/scripts/tools.ts"],"names":["tools","AudioClip","Prefab","resMgr","AudioMgr","SOUND","GAMESTATE","GAMETIPS","savaData","localStorage","setItem","xiPai","toString","cheHui","addTime","touShi","getData","Number","getItem","getRandomInt","min","max","Math","floor","random","getRandomMjIndex","randomInt","playSound","sound","start_sound","audioClip","Instance","getAsset","playEffect","click_sound","gameLost_sound","gameWin_sound","sendCard_sound","time_sound","clear_sound","back_sound","playBgm","saveLevel","cardBackTotal","level","cardBackNow","getLevel","randomMjAnim","type","animType","picNum","music","gameMusic","gameSound","resPkg","prefabs","assetType","urls"],"mappings":"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","sourcesContent":["import { Asset, AudioClip, Constructor, Prefab } from \"cc\";\nimport resMgr from \"./resMgr\";\nimport AudioMgr from \"./audioManager\";\nexport type AssetType<T = Asset> = Constructor<T>;\nexport type LoadCompleteCallback<T> = (error: Error | null, asset: T) => void;\nexport enum SOUND {\n    start_sound,\n    click_sound,\n    gameLost_sound,\n    gameWin_sound,\n    sendCard_sound,\n    time_sound,\n    clear_sound,\n    back_sound,\n}\n\nexport enum GAMESTATE {\n    game_start,\n    game_inGame,\n    game_end,\n}\n\nexport enum GAMETIPS {\n    game_success,\n    gmae_fail,\n    game_hide,\n    game_seting,\n}\n\nexport default class tools {\n\n    static level: number = 1;       //当前游戏关卡等级\n    static picNum: number = 3;      //图片数量 level * picNum\n    static animType: number = 2;     //发牌动画 1同时移动，缩放  2缩放出现\n    static cardBackTotal: number = 0;      //背面牌数量\n    static cardBackNow: number = 0;\n\n    static music = true;    //背景音乐\n    static xiPai = 3;       //洗牌次数\n    static cheHui = 3;      //撤回次数\n    static addTime = 30;    //加时30s\n    static touShi = 3;      //透视\n\n    static gameMusic = true;\n    static gameSound = true;\n\n    // static levelData =\n    //     [\n    //         //等级，牌数量，时间\n    //         { lv: 0, cardNum: 0, time: 0 },\n    //         { lv: 1, cardNum: 3 * 6, time: 40 },\n    //         { lv: 2, cardNum: 3 * 10, time: 45 },\n    //         { lv: 3, cardNum: 3 * 12, time: 60 },\n    //         { lv: 4, cardNum: 3 * 14, time: 65 },\n    //         { lv: 5, cardNum: 3 * 16, time: 70 },\n    //         { lv: 6, cardNum: 3 * 20, time: 75 },\n    //         { lv: 7, cardNum: 3 * 24, time: 80 },\n    //         { lv: 8, cardNum: 3 * 28, time: 90 },\n    //         { lv: 9, cardNum: 3 * 32, time: 110 },\n    //         { lv: 10, cardNum: 3 * 40, time: 150 },\n    //     ]\n\n\n    static resPkg = {\n        //gui: {\n        //     assetType: SpriteFrame,\n        //     urls: [\n        //         'btn_bg/spriteFrame',\n        //         'frame/spriteFrame',\n        //         'game_bg/spriteFrame',\n        //         'mj_card/spriteFrame',\n        //     ],\n        // },\n\n        prefabs: {\n            assetType: Prefab,\n            urls: [\n                'gameTips',\n                'gameStart',\n                'mjcard',\n                'gameNode',\n            ],\n        },\n\n        sound: {\n            assetType: AudioClip,\n            urls: [\n                'back',\n                'click',\n                'gameLost',\n                'gameStart',\n                'gameWin',\n                'sendCard',\n                'time',\n                'clear',\n            ],\n        },\n    };\n\n    static savaData() {\n        localStorage.setItem('xiPai', tools.xiPai.toString());\n        localStorage.setItem('cheHui', tools.cheHui.toString());\n        localStorage.setItem('addTime', tools.addTime.toString());\n        localStorage.setItem('touShi', tools.touShi.toString());\n    }\n\n    static getData() {\n        let xiPai = Number(localStorage.getItem('xiPai'));\n        let cheHui = Number(localStorage.getItem('cheHui'));\n        let addTime = Number(localStorage.getItem('addTime'));\n        let touShi = Number(localStorage.getItem('touShi'));\n        if (xiPai === 0 && cheHui === 0 && addTime == 0 && touShi == 0) {\n            tools.xiPai = 3;\n            tools.cheHui = 3;\n            tools.addTime = 30;\n            tools.touShi = 3;\n            return;\n        }\n        tools.xiPai = xiPai;\n        tools.cheHui = cheHui;\n        tools.addTime = addTime;\n        tools.touShi = touShi;\n\n    }\n\n    static getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    static getRandomMjIndex() {\n        let randomInt = tools.getRandomInt(1, 34);\n        return randomInt;\n    }\n\n    static playSound(sound) {\n        if (sound == SOUND.start_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'gameStart') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.click_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'click') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.gameLost_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'gameLost') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.gameWin_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'gameWin') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.sendCard_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'sendCard') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.time_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'time') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.clear_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'clear') as AudioClip;\n            AudioMgr.Instance.playEffect(audioClip);\n        }\n        else if (sound == SOUND.back_sound) {\n            let audioClip = resMgr.Instance.getAsset('sound', 'back') as AudioClip;\n            AudioMgr.Instance.playBgm(audioClip);\n        }\n    }\n\n    static saveLevel() {\n        tools.cardBackTotal = tools.level;\n        tools.cardBackNow = 0;\n        localStorage.setItem('level', tools.level.toString());\n    }\n\n    static getLevel() {\n        // tools.level = 2;\n        // return tools.level;\n        let level = localStorage.getItem('level');\n        tools.level = Number(level);\n        if (tools.level == 0) tools.level = 1;\n        return tools.level;\n    }\n\n    static randomMjAnim() {\n        let type = 1;\n        if (tools.level % 2 == 0) type = 1;\n        else type = 2\n        tools.animType = type;\n    }\n}"]}